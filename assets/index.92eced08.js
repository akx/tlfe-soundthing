import{R as t,u as h,a as v}from"./vendor.2c090166.js";const N=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}};N();const y={"11":15.434,"12":16.352,"13":17.324,"14":18.354,"15":19.445,"16":20.602,"17":21.827,"18":23.125,"19":24.5,"20":25.957,"21":27.5,"22":29.135,"23":30.868,"24":32.703,"25":34.648,"26":36.708,"27":38.891,"28":41.203,"29":43.654,"30":46.249,"31":48.999,"32":51.913,"33":55,"34":58.27,"35":61.735,"36":65.406,"37":69.296,"38":73.416,"39":77.782,"40":82.407,"41":87.307,"42":92.499,"43":97.999,"44":103.83,"45":110,"46":116.54,"47":123.47,"48":130.81,"49":138.59,"50":146.83,"51":155.56,"52":164.81,"53":174.61,"54":185,"55":196,"56":207.65,"57":220,"58":233.08,"59":246.94,"60":261.63,"61":277.18,"62":293.66,"63":311.13,"64":329.63,"65":349.23,"66":369.99,"67":392,"68":415.3,"69":440,"70":466.16,"71":493.88,"72":523.25,"73":554.37,"74":587.33,"75":622.25,"76":659.26,"77":698.46,"78":739.99,"79":783.99,"80":830.61,"81":880,"82":932.33,"83":987.77,"84":1046.5,"85":1108.7,"86":1174.7,"87":1244.5,"88":1318.5,"89":1396.9,"90":1480,"91":1568,"92":1661.2,"93":1760,"94":1864.7,"95":1975.5,"96":2093,"97":2217.5,"98":2349.3,"99":2489,"100":2637,"101":2793.8,"102":2960,"103":3136,"104":3322.4,"105":3520,"106":3729.3,"107":3951.1,"108":4186,"109":4434.9,"110":4698.6,"111":4978,"112":5274,"113":5587.7,"114":5919.9,"115":6271.9,"116":6644.9,"117":7040,"118":7458.6,"119":7902.1,"120":8372,"121":8869.8,"122":9397.3,"123":9956.1,"124":10548,"125":11175,"126":11840,"127":12544,"128":13290,"129":14080,"130":14917,"131":15804,"132":16744};function E(){const n=new AudioContext,a=n.createOscillator();a.type="square";const s=n.createBiquadFilter();s.frequency.value=800,s.type="lowpass";const c=n.createAnalyser();return c.fftSize=512,c.smoothingTimeConstant=.3,a.connect(s),s.connect(n.destination),s.connect(c),{audioContext:n,oscNode:a,filterNode:s,vizNode:c}}function x(n){let a=n[0];for(let s=1;s<n.length;s++)a=Math.max(Math.abs(n[s]),a);return a}function b({vizNode:n}){const a=t.useRef(null),s=t.useCallback(()=>{const c=a.current;if(!c)return;const o=new Float32Array(512),r=new Uint8Array(256);n.getFloatTimeDomainData(o),n.getByteFrequencyData(r);const l=c.getContext("2d");c.width=+c.width;const{width:d,height:u}=c,f=u/2,m=x(o);l.beginPath(),l.strokeStyle="1px solid black";for(let e=0;e<o.length;e++){const i=e/o.length*d,p=f+o[e]/m*f;e===0?l.moveTo(i,p):l.lineTo(i,p)}l.stroke(),l.fillStyle="orangered",l.globalAlpha=.6,l.beginPath(),l.moveTo(0,0);const g=x(r);for(let e=0;e<r.length;e++){const i=e/r.length*d,p=r[e]/g*u;l.lineTo(i,u-p)}l.lineTo(d,u),l.lineTo(0,u),l.closePath(),l.fill()},[n]);return h(s,30),t.createElement("canvas",{width:800,height:300,style:{width:"40%",border:"1px solid orange"},ref:a})}function q(){const[n]=t.useState(()=>E()),[a,s]=t.useState("44 66 89 30"),[c,o]=t.useState(120),[r,l]=t.useState(800),[d,u]=t.useState(0);h(()=>{u(e=>e+1)},6e4/(c*4));const f=t.useMemo(()=>a.split(/\s+/).map(e=>+e).filter(Boolean),[a]),m=t.useMemo(()=>{const e=d%f.length,i=f[e];return y[i]||432},[d,f]);t.useEffect(()=>{n.oscNode.frequency.value=m,n.filterNode.frequency.value=r},[n.filterNode.frequency,n.oscNode.frequency,m,r]);const g=t.useCallback(e=>{s(i=>(i+" "+e).trim())},[]);return t.createElement("div",{className:"App"},t.createElement("button",{onClick:()=>{n.audioContext.resume(),n.oscNode.start(),console.log(n.audioContext.state)}},"Go"),t.createElement("hr",null),t.createElement("input",{type:"text",value:a,onChange:e=>s(e.target.value)}),t.createElement("input",{type:"range",min:20,max:300,value:c,onChange:e=>o(e.target.valueAsNumber)}),c,t.createElement("hr",null),t.createElement("input",{type:"range",min:400,max:22e3,value:r,onChange:e=>l(e.target.valueAsNumber)}),t.createElement("hr",null),t.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},Object.keys(y).map(e=>t.createElement("button",{key:e,onClick:()=>g(e)},e))),t.createElement("hr",null),t.createElement(b,{vizNode:n.vizNode}))}v.render(t.createElement(t.StrictMode,null,t.createElement(q,null)),document.getElementById("root"));
