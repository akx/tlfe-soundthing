import{R as e,u as g,a as y}from"./vendor.2c090166.js";const v=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}};v();const h={"11":15.434,"12":16.352,"13":17.324,"14":18.354,"15":19.445,"16":20.602,"17":21.827,"18":23.125,"19":24.5,"20":25.957,"21":27.5,"22":29.135,"23":30.868,"24":32.703,"25":34.648,"26":36.708,"27":38.891,"28":41.203,"29":43.654,"30":46.249,"31":48.999,"32":51.913,"33":55,"34":58.27,"35":61.735,"36":65.406,"37":69.296,"38":73.416,"39":77.782,"40":82.407,"41":87.307,"42":92.499,"43":97.999,"44":103.83,"45":110,"46":116.54,"47":123.47,"48":130.81,"49":138.59,"50":146.83,"51":155.56,"52":164.81,"53":174.61,"54":185,"55":196,"56":207.65,"57":220,"58":233.08,"59":246.94,"60":261.63,"61":277.18,"62":293.66,"63":311.13,"64":329.63,"65":349.23,"66":369.99,"67":392,"68":415.3,"69":440,"70":466.16,"71":493.88,"72":523.25,"73":554.37,"74":587.33,"75":622.25,"76":659.26,"77":698.46,"78":739.99,"79":783.99,"80":830.61,"81":880,"82":932.33,"83":987.77,"84":1046.5,"85":1108.7,"86":1174.7,"87":1244.5,"88":1318.5,"89":1396.9,"90":1480,"91":1568,"92":1661.2,"93":1760,"94":1864.7,"95":1975.5,"96":2093,"97":2217.5,"98":2349.3,"99":2489,"100":2637,"101":2793.8,"102":2960,"103":3136,"104":3322.4,"105":3520,"106":3729.3,"107":3951.1,"108":4186,"109":4434.9,"110":4698.6,"111":4978,"112":5274,"113":5587.7,"114":5919.9,"115":6271.9,"116":6644.9,"117":7040,"118":7458.6,"119":7902.1,"120":8372,"121":8869.8,"122":9397.3,"123":9956.1,"124":10548,"125":11175,"126":11840,"127":12544,"128":13290,"129":14080,"130":14917,"131":15804,"132":16744};function x(){const r=new AudioContext,l=r.createOscillator();l.type="square";const s=r.createBiquadFilter();s.frequency.value=800,s.type="lowpass";const a=r.createAnalyser();return l.connect(s),s.connect(r.destination),s.connect(a),{audioContext:r,oscNode:l,filterNode:s,vizNode:a}}function N({vizNode:r}){const l=e.useRef(null),s=e.useCallback(()=>{const a=l.current;if(!a)return;const t=new Float32Array(512);r.getFloatTimeDomainData(t);const n=a.getContext("2d");a.width=+a.width;const{width:i,height:d}=a,f=d/2;let u=0;for(let c=0;c<t.length;c++)u=Math.max(Math.abs(t[c]),u);n.beginPath(),n.strokeStyle="1px solid black";for(let c=0;c<t.length;c++){const m=c/t.length*i,o=f+t[c]/u*f;c===0?n.moveTo(m,o):n.lineTo(m,o)}n.stroke()},[r]);return g(s,30),e.createElement("canvas",{width:800,height:300,style:{width:"40%",border:"1px solid orange"},ref:l})}function E(){const[r]=e.useState(()=>x()),[l,s]=e.useState("44 66 89 30"),[a,t]=e.useState(120),[n,i]=e.useState(800),[d,f]=e.useState(0);g(()=>{f(o=>o+1)},6e4/(a*4));const u=e.useMemo(()=>l.split(/\s+/).map(o=>+o).filter(Boolean),[l]),c=e.useMemo(()=>{const o=d%u.length,p=u[o];return h[p]||432},[d,u]);e.useEffect(()=>{r.oscNode.frequency.value=c,r.filterNode.frequency.value=n},[r.filterNode.frequency,r.oscNode.frequency,c,n]);const m=e.useCallback(o=>{s(p=>(p+" "+o).trim())},[]);return e.createElement("div",{className:"App"},e.createElement("button",{onClick:()=>{r.audioContext.resume(),r.oscNode.start(),console.log(r.audioContext.state)}},"Go"),e.createElement("hr",null),e.createElement("input",{type:"text",value:l,onChange:o=>s(o.target.value)}),e.createElement("input",{type:"range",min:20,max:300,value:a,onChange:o=>t(o.target.valueAsNumber)}),a,e.createElement("hr",null),e.createElement("input",{type:"range",min:400,max:22e3,value:n,onChange:o=>i(o.target.valueAsNumber)}),e.createElement("hr",null),e.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},Object.keys(h).map(o=>e.createElement("button",{key:o,onClick:()=>m(o)},o))),e.createElement("hr",null),e.createElement(N,{vizNode:r.vizNode}))}y.render(e.createElement(e.StrictMode,null,e.createElement(E,null)),document.getElementById("root"));
